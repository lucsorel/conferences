:revealjs_customtheme: assets/beige-stylesheet.css
:revealjs_progress: true
:revealjs_slideNumber: true
:source-highlighter: highlightjs
:icons: font
:toc:

= Outiller son projet open-source Python avec les Github actions

== Qui suis-je ?

* üíôüíõ dev Python @ PureControl
* üêà‚Äç‚¨õ https://github.com/lucsorel[github.com/lucsorel] (doc-as-code, doc-from-code)
* üêò https://floss.social/@lucsorelgiffo[@lucsorelgiffo@floss.social]

== Le projet open-source Python

https://github.com/lucsorel/py2puml : g√©n√®re un diagramme de classes en scannant les structures de donn√©es de la base de code.

image::http://www.plantuml.com/plantuml/svg/ZL9HQzim47xNhxYz5kh07aqVMaBO36jIiknfb72sBvcO97lIUH3Q_lUT7TMCEaH-qeTqztsVxhxxmEYvimRQq-TMpgnkB6gdFhKUZnQX2rGu9c-friZqXDLlF5A00vf0gZ8OmeVMh3tNPB4MNXI0Gqiv1FQ2gr_Qr9vS3jzqu9-nx5bUD9CDUzVPadmEsh5wkomXSBZFVbZpmEnrsV5KY4_jY0CZwog7icdC7DPb3mP6VESFqV3_ceFhiCTILB3Y97__mvw-a7FYz_373V1AFybmiaVg1pHf_ukcera4Oc0bvy1W1xBtlvsfduMWBxpGxyaWwyPbMp8xcU_0iTmyFcs-5xjYiyxX1bxEmtwJbsBzTRKjTW_hvIg7kzVnQUfmgY0kjn4FAg7fV4NxSKe0ZFv8FDwCAu_UH2GHpPlRsqHwLIeZaICTJvL8mzsh4ANKL6AZOkPwQkQwk2AYvkqiUaa5I1sQXid35tBaaQc6yWIBHMnSBDGzkLhGFm00[py2puml,width="45%"]

[.columns]
=== Syndr√¥me de Spiderman

[.column]
--
**Spiderman**

* 1 piq√ªre : üò¨
* grimpe aux murs : üí™
* anime des soir√©es mousse avec les poignets : ü•≥

image::assets/spiderman_got_it_wrong.png[]
--

[.column]
--
--

[.columns]
=== Syndr√¥me de Spiderman

[.column]
--
**Spiderman**

* 1 piq√ªre : üò¨
* grimpe aux murs : üí™
* anime des soir√©es mousse avec les poignets : ü•≥

image::assets/spiderman_got_it_wrong.png[]
--

[.column]
--
**py2puml**

* 140+ ‚≠ê : ü•≥
* 37 issues (24 ferm√©es) : üò¨
* 25 PR (21 ferm√©es) : ü•µ

[.medium-text]
____
> **"De nouvelles responsabilit√©s demandent de nouveaux pouvoirs."**
>
> Luc (du 35) üï∏Ô∏è
____
--

=== Accueillir et cadrer les contributions

* non-r√©gression des fonctionnalit√©s
* homog√©n√©it√© des pratiques
** formatage de code
** qualit√© de code

=== CONTRIBUTING.md

üó£Ô∏è "bla bla bla" -> ‚ùå

Des conventions non outill√©es finissent dans l'oubli.

=== Int√©gration continue

* non-r√©gression -> **tests automatis√©s** (+ couverture de code test√©)
* homog√©n√©it√© de la base de code
** formatage de code -> **formateur**
** qualit√© de code -> **linter**

== Mise en place des Github actions

Syntaxe **d√©clarative** permettant d'ex√©cuter des commandes ou des outils au fil du cycle de vie _git_ du projet.

[source,text]
----
super-projet/
  ‚îú‚îÄ .github/
  ‚îÇ  ‚îî‚îÄ workflows/
  ‚îÇ     ‚îú‚îÄ {nom_de_workflow}.yml  # ci.yml, par exemple
  ‚îÇ     ‚îî‚îÄ ...
----

image::assets/mark_yaml.jpg[width="50%"]

=== Anatomie progressive d'un workflow IC dans Github

D√©part : syst√®me d'exploitation + checkout du code source

[source,yaml]
----
name: Python CI # facultatif

on: push        # √©v√®nement(s) git d√©clencheur(s)

jobs:
  build: # le nom de l'√©tape
    runs-on: ubuntu-latest # syst√®me d'exploitation utilis√©
    steps:
      - name: R√©cup√©ration du code # facultatif
        uses: actions/checkout@v4  # utilisation d'une recette existante (‚ö†Ô∏è @version)
----

=== Actions : les recettes de base

* 62 actions "officielles" propos√©es par Github (septembre 2023)
** chacune a son repo
** sa configuration est d√©crite dans un fichier `action.yaml`
** parfois accompagn√©e de scripts r√©f√©renc√©s dans `action.yaml`
* plein d'actions propos√©es par la communaut√©

[.medium-text]
Exemples : https://github.com/actions/checkout[github.com/actions/checkout], https://github.com/abatilo/actions-poetry[github.com/abatilo/actions-poetry]
